{"version":3,"sources":["pages/template/Criterion.js","pages/council/CouncilCard.js","pages/my/topic/TopicCard.js","pages/my/mark/MarkTab.js","pages/score/TopicScore.js"],"names":["MainComponent","criterion","children","deep","edit","updateCriterion","removeCriterion","props","score","scores","find","e","id","toString","updateChildren","renderChildren","item","index","key","nextItem","nextChildren","localUpdateCriterion","splice","localRemoveCriterion","className","row","rows","parseInt","description","length","value","onChange","target","md","content","size","color","variant","split","name","onClick","nextCriterion","parentId","mark","list","setList","map","style","maxWidth","placeholder","disabled","disableMark","updateScore","slice","comment","council","history","useHistory","iconPadding","header","push","subjectDepartmentName","reserveDate","startTime","endTime","text","location","topic","vi","en","settingTemplate","topicId","studentId","teacherId","scoreExample","teacher","contextHolder","user","student","useState","setScores","useEffect","api","post","then","template","rootCriterion","findIndex","nextScores","entities","toastHolder","success","window","pathname","match","setTopic","topicRole","setTopicRole","teachers","setTeachers","setTeacherId","settingTemplates","setSettingTemplates","settingTemplateIndex","setSettingTemplateIndex","setStudentId","get","response","role","memberId","guideTeachers","reviewTeachers","councilTeachers","members","filter","member","params","class","x","i","a","code","firstName","lastName","students"],"mappings":"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","file":"static/js/9.4041943b.chunk.js","sourcesContent":["import CIcon from \"@coreui/icons-react\";\r\nimport {\r\n  CButton,\r\n  CCol,\r\n  CDropdown,\r\n  CDropdownItem,\r\n  CDropdownMenu,\r\n  CDropdownToggle,\r\n  CForm,\r\n  CFormGroup,\r\n  CInput,\r\n  CTextarea,\r\n  CTooltip,\r\n} from \"@coreui/react\";\r\nimport React from \"react\";\r\nimport { ReactSortable } from \"react-sortablejs\";\r\n\r\nconst MainComponent = ({\r\n  criterion = { children: [] },\r\n  deep,\r\n  edit,\r\n  updateCriterion = () => {},\r\n  removeCriterion = () => {},\r\n  ...props\r\n}) => {\r\n  const score = props.scores?.find(\r\n    (e) => e.criterion.id.toString() === criterion.id.toString()\r\n  );\r\n\r\n  const updateChildren = (children) =>\r\n    updateCriterion({ ...criterion, children });\r\n\r\n  const addCriterion = () => {\r\n    const nextCriterion = { ...criterion };\r\n    nextCriterion.children = [\r\n      ...criterion.children,\r\n      { parentId: criterion.id, children: [] },\r\n    ];\r\n    updateCriterion(nextCriterion);\r\n  };\r\n\r\n  const localUpdateCriterion = (index, nextItem) => {\r\n    const nextChildren = [...criterion.children];\r\n    nextChildren[index] = nextItem;\r\n    updateChildren(nextChildren);\r\n  };\r\n\r\n  const localRemoveCriterion = (index) => {\r\n    const nextChildren = [...criterion.children];\r\n    nextChildren.splice(index, 1);\r\n    updateChildren(nextChildren);\r\n  };\r\n\r\n  const renderChildren = (item, index) => {\r\n    return (\r\n      <MainComponent\r\n        {...props}\r\n        key={item.id}\r\n        criterion={item}\r\n        deep={deep + 1}\r\n        edit={edit}\r\n        updateCriterion={(nextItem) => localUpdateCriterion(index, nextItem)}\r\n        removeCriterion={() => localRemoveCriterion(index)}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <CForm className={`${deep > 0 ? `ml-4 mt-${4 - deep}` : \"\"}`}>\r\n      <CFormGroup row className=\"pl-0 ml-0 mb-0\">\r\n        <CCol className=\"pl-0 pr-1\">\r\n          {edit && deep > 0 ? (\r\n            <CTextarea\r\n              rows={parseInt(criterion.description?.length / 130) + 1}\r\n              value={criterion.description}\r\n              onChange={(e) =>\r\n                updateCriterion({ ...criterion, description: e.target.value })\r\n              }\r\n            />\r\n          ) : (\r\n            <>{deep > 0 ? criterion.description : null}</>\r\n          )}\r\n        </CCol>\r\n        {edit && (\r\n          <CCol md=\"0\">\r\n            <CDropdown>\r\n              <CTooltip content={\"Giữ và kéo để thay đổi thứ tự\"}>\r\n                <CDropdownToggle\r\n                  size=\"sm\"\r\n                  color=\"primary\"\r\n                  variant=\"outline\"\r\n                  split\r\n                >\r\n                  <CIcon name=\"cil-cursor-move\" />\r\n                </CDropdownToggle>\r\n              </CTooltip>\r\n              <CDropdownMenu>\r\n                <CDropdownItem onClick={addCriterion}>\r\n                  Thêm tiêu chí con\r\n                </CDropdownItem>\r\n                {deep > 0 && (\r\n                  <>\r\n                    <CDropdownItem\r\n                      onClick={() => {\r\n                        updateCriterion({\r\n                          ...criterion,\r\n                          mark: !criterion.mark,\r\n                        });\r\n                      }}\r\n                    >\r\n                      {criterion.mark ? \"Hủy chấm điểm\" : \"Chấm điểm tiêu chí\"}\r\n                    </CDropdownItem>\r\n                    <CDropdownItem onClick={removeCriterion}>\r\n                      Xóa tiêu chí\r\n                    </CDropdownItem>\r\n                  </>\r\n                )}\r\n              </CDropdownMenu>\r\n            </CDropdown>\r\n          </CCol>\r\n        )}\r\n      </CFormGroup>\r\n\r\n      {criterion.children &&\r\n        criterion.children.length > 0 &&\r\n        (edit ? (\r\n          <ReactSortable list={criterion?.children} setList={updateChildren}>\r\n            {criterion?.children?.map(renderChildren)}\r\n          </ReactSortable>\r\n        ) : (\r\n          criterion?.children?.map(renderChildren)\r\n        ))}\r\n\r\n      {criterion.mark && (\r\n        <CFormGroup row className=\"m-0 ml-2\">\r\n          <CCol className=\"p-0\" style={{ maxWidth: 60 }}>\r\n            <CInput\r\n              size=\"sm\"\r\n              placeholder={\"Điểm\"}\r\n              value={score?.score}\r\n              disabled={props.disableMark}\r\n              onChange={(e) =>\r\n                props.updateScore({\r\n                  ...score,\r\n                  criterion: { id: criterion.id },\r\n                  score: e.target.value,\r\n                })\r\n              }\r\n            />\r\n          </CCol>\r\n          <CCol className=\"p-0\">\r\n            <CTextarea\r\n              size=\"sm\"\r\n              rows={1}\r\n              placeholder={`Bình luận cho: ${criterion.description?.slice(\r\n                0,\r\n                150\r\n              )}`}\r\n              value={score?.comment}\r\n              disabled={props.disableMark}\r\n              onChange={(e) =>\r\n                props.updateScore({\r\n                  ...score,\r\n                  criterion: { id: criterion.id },\r\n                  comment: e.target.value,\r\n                })\r\n              }\r\n            />\r\n          </CCol>\r\n          {edit && (\r\n            <CCol md=\"0\">\r\n              <CTooltip content={`Bỏ chấm điểm tiêu chí`}>\r\n                <CButton\r\n                  size=\"sm\"\r\n                  color=\"primary\"\r\n                  variant={\"ghost\"}\r\n                  onClick={() => {\r\n                    updateCriterion({\r\n                      ...criterion,\r\n                      mark: false,\r\n                    });\r\n                  }}\r\n                >\r\n                  <CIcon name=\"cil-trash\" />\r\n                </CButton>\r\n              </CTooltip>\r\n            </CCol>\r\n          )}\r\n        </CFormGroup>\r\n      )}\r\n    </CForm>\r\n  );\r\n};\r\n\r\nexport default MainComponent;\r\n","import { CLink, CTooltip, CWidgetIcon } from \"@coreui/react\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst MainComponent = ({ council = {} }) => {\r\n  const history = useHistory();\r\n\r\n  const viewDetail = () => {\r\n    history.push(`/councils/detail/${council.id}`);\r\n  };\r\n\r\n  return (\r\n    <CWidgetIcon\r\n      color=\"info\"\r\n      iconPadding={false}\r\n      className=\"mb-0\"\r\n      header={\r\n        <CTooltip content={`Xem chi tiết hội đồng mã số ${council.id}`}>\r\n          <CLink onClick={viewDetail}>\r\n            {`${council.subjectDepartmentName}`}\r\n            <br />\r\n            {`${council.reserveDate}: ${council.startTime} - ${council.endTime}`}\r\n          </CLink>\r\n        </CTooltip>\r\n      }\r\n      text={\r\n        council.location && (\r\n          <small>{`${\r\n            council.location.slice(0, 300) +\r\n            (council.location.length > 300 ? \"...\" : \"\")\r\n          }`}</small>\r\n        )\r\n      }\r\n    >\r\n      {council.id}\r\n    </CWidgetIcon>\r\n  );\r\n};\r\n\r\nexport default MainComponent;\r\n","import { CLink, CTooltip, CWidgetIcon } from \"@coreui/react\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst MainComponent = ({ topic }) => {\r\n  const history = useHistory();\r\n\r\n  const viewDetail = () => {\r\n    history.push(`/topics/${topic.id}`);\r\n  };\r\n\r\n  return (\r\n    <CWidgetIcon\r\n      color=\"info\"\r\n      iconPadding={false}\r\n      className=\"mb-0\"\r\n      header={\r\n        <CTooltip content={`Xem chi tiết đề tài mã số ${topic.id}`}>\r\n          <CLink onClick={viewDetail}>\r\n            {`${topic.name?.vi}`}\r\n            <br />\r\n            {`${topic.name?.en}`}\r\n          </CLink>\r\n        </CTooltip>\r\n      }\r\n      text={\r\n        topic.description && (\r\n          <small>{`${\r\n            topic.description.slice(0, 300) +\r\n            (topic.description.length > 300 ? \"...\" : \"\")\r\n          }`}</small>\r\n        )\r\n      }\r\n    >\r\n      {topic.id}\r\n    </CWidgetIcon>\r\n  );\r\n};\r\n\r\nexport default MainComponent;\r\n","import CIcon from \"@coreui/icons-react\";\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardFooter,\r\n  CCardHeader,\r\n} from \"@coreui/react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Criterion from \"src/pages/template/Criterion\";\r\nimport api from \"src/service/api\";\r\nimport contextHolder from \"src/service/contextService\";\r\nimport toastHolder from \"src/service/toastService\";\r\n\r\nconst MainComponent = ({\r\n  settingTemplate,\r\n  topicId,\r\n  studentId,\r\n  teacherId,\r\n  disableMark = false,\r\n}) => {\r\n  const scoreExample = {\r\n    settingTemplate: { id: settingTemplate.id },\r\n    topic: { id: topicId },\r\n    teacher: { id: teacherId ?? contextHolder.user.id },\r\n    student: { id: studentId },\r\n  };\r\n\r\n  const [scores, setScores] = useState([]);\r\n\r\n  const updateScore = (score) => {\r\n    score = { ...score, ...scoreExample };\r\n    const index = scores.findIndex(\r\n      (e) => e.criterion.id === score.criterion.id\r\n    );\r\n    if (index < 0) {\r\n      setScores([...scores, score]);\r\n    } else {\r\n      let nextScores = scores.slice();\r\n      nextScores[index] = score;\r\n      setScores(nextScores);\r\n    }\r\n  };\r\n\r\n  const submit = () => {\r\n    api.post(`/scores/all`, { entities: scores }).then(() => {\r\n      toastHolder.success(\"Chấm điểm thành công\");\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    api.post(`/scores/example`, scoreExample).then(setScores);\r\n  }, []);\r\n\r\n  return (\r\n    <CCard>\r\n      <CCardHeader>{settingTemplate.template?.description}</CCardHeader>\r\n      <CCardBody className=\"pl-0 mr-3\">\r\n        <Criterion\r\n          criterion={settingTemplate.template?.rootCriterion}\r\n          deep={0}\r\n          scores={scores}\r\n          updateScore={updateScore}\r\n          disableMark={disableMark}\r\n        />\r\n      </CCardBody>\r\n      {!disableMark && (\r\n        <CCardFooter>\r\n          <CButton size=\"sm\" color=\"primary\" onClick={submit}>\r\n            <CIcon name=\"cil-save\" /> Lưu\r\n          </CButton>\r\n        </CCardFooter>\r\n      )}\r\n    </CCard>\r\n  );\r\n};\r\n\r\nexport default MainComponent;\r\n","import {\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CForm,\r\n  CFormGroup,\r\n  CRow,\r\n  CSelect,\r\n} from \"@coreui/react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport CouncilCard from \"src/pages/council/CouncilCard\";\r\nimport MarkTab from \"src/pages/my/mark/MarkTab\";\r\nimport TopicCard from \"src/pages/my/topic/TopicCard\";\r\nimport api from \"src/service/api\";\r\n\r\nconst MainComponent = () => {\r\n  const topicId = window.location.pathname.match(/score\\/topic\\/(\\d+)/, \"\")[1];\r\n\r\n  const [topic, setTopic] = useState({});\r\n  const [topicRole, setTopicRole] = useState(-1);\r\n  const [teachers, setTeachers] = useState([]);\r\n  const [teacherId, setTeacherId] = useState(\"---\");\r\n  const [settingTemplates, setSettingTemplates] = useState([]);\r\n  const [settingTemplateIndex, setSettingTemplateIndex] = useState(\"---\");\r\n  const [studentId, setStudentId] = useState(\"---\");\r\n\r\n  useEffect(() => {\r\n    api.get(`/topics/detail/${topicId}`).then((response) => {\r\n      setTopic(response);\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setTeacherId(\"---\");\r\n    setSettingTemplateIndex(\"---\");\r\n\r\n    let role;\r\n    let memberId = -1;\r\n\r\n    if (topicRole === \"-1\") {\r\n      role = \"guide\";\r\n      setTeachers(topic.guideTeachers);\r\n    } else if (topicRole === \"-2\") {\r\n      role = \"review\";\r\n      setTeachers(topic.reviewTeachers);\r\n    } else if (topicRole > 0) {\r\n      role = \"council\";\r\n      memberId = topicRole;\r\n      let councilTeachers = topic?.council?.members\r\n        ?.filter((e) => e.member.id.toString() === topicRole)\r\n        .map((e) => e.member);\r\n      setTeachers(councilTeachers);\r\n    }\r\n\r\n    if (!role) return;\r\n    api\r\n      .get(`/setting-templates/topic`, {\r\n        params: { topicId, role, memberId },\r\n      })\r\n      .then(setSettingTemplates);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [topicRole]);\r\n\r\n  return (\r\n    <CCard>\r\n      <CCardHeader>\r\n        <CRow class=\"d-flex justify-content-center\">\r\n          {topic.council && (\r\n            <CCol md=\"4\">\r\n              <CouncilCard council={topic.council} />\r\n            </CCol>\r\n          )}\r\n          <CCol md=\"4\">\r\n            <TopicCard topic={topic} />\r\n          </CCol>\r\n        </CRow>\r\n\r\n        <br />\r\n\r\n        <CForm>\r\n          <CFormGroup row>\r\n            <CCol md=\"2\">\r\n              Vai trò\r\n              <CSelect size=\"sm\" onChange={(e) => setTopicRole(e.target.value)}>\r\n                <option>---</option>\r\n                <option value=\"-1\">Giáo viên hướng dẫn</option>\r\n                <option value=\"-2\">Giáo viên phản biện</option>\r\n                {topic.council?.members\r\n                  .map((member) => member.role)\r\n                  .filter((x, i, a) => a.findIndex((e) => e.id === x.id) === i)\r\n                  .map((e) => (\r\n                    <option id={e.id} value={e.id}>\r\n                      {e.name} hội đồng\r\n                    </option>\r\n                  ))}\r\n              </CSelect>\r\n            </CCol>\r\n            <CCol md=\"3\">\r\n              Giáo viên\r\n              <CSelect\r\n                size=\"sm\"\r\n                value={teacherId}\r\n                onChange={(e) => setTeacherId(e.target.value)}\r\n              >\r\n                <option>---</option>\r\n                {teachers.map((e) => (\r\n                  <option id={e.id} value={e.id}>\r\n                    {e.code} {e.firstName} {e.lastName}\r\n                  </option>\r\n                ))}\r\n              </CSelect>\r\n            </CCol>\r\n            <CCol>\r\n              Mẫu tiêu chí\r\n              <CSelect\r\n                size=\"sm\"\r\n                onChange={(e) => setSettingTemplateIndex(e.target.value)}\r\n              >\r\n                <option>---</option>\r\n                {settingTemplates.map((e, index) => (\r\n                  <option id={e.id} value={index}>\r\n                    {e.template.name}\r\n                  </option>\r\n                ))}\r\n              </CSelect>\r\n            </CCol>\r\n            <CCol md=\"3\">\r\n              Sinh viên\r\n              <CSelect size=\"sm\" onChange={(e) => setStudentId(e.target.value)}>\r\n                <option>---</option>\r\n                {topic?.students?.map((e) => (\r\n                  <option id={e.id} value={e.id}>\r\n                    {e.code} {e.firstName} {e.lastName}\r\n                  </option>\r\n                ))}\r\n              </CSelect>\r\n            </CCol>\r\n          </CFormGroup>\r\n        </CForm>\r\n      </CCardHeader>\r\n      <CCardBody>\r\n        {settingTemplateIndex !== \"---\" &&\r\n          teacherId !== \"---\" &&\r\n          studentId !== \"---\" && (\r\n            <MarkTab\r\n              settingTemplate={settingTemplates[settingTemplateIndex]}\r\n              topicId={topicId}\r\n              teacherId={teacherId}\r\n              studentId={studentId}\r\n              disableMark={true}\r\n            />\r\n          )}\r\n      </CCardBody>\r\n    </CCard>\r\n  );\r\n};\r\n\r\nexport default MainComponent;\r\n"],"sourceRoot":""}