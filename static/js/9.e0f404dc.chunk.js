(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[9],{724:function(e,t,c){"use strict";var i=c(193),n=c(46),r=c(192),o=c(59),a=c(48),s=c(1),l=c(741),d=c(13),j=["criterion","deep","edit","updateCriterion","removeCriterion"];t.a=function e(t){var c,u,b,h,m,O=t.criterion,v=void 0===O?{children:[]}:O,p=t.deep,x=t.edit,f=t.updateCriterion,g=void 0===f?function(){}:f,C=t.removeCriterion,k=void 0===C?function(){}:C,S=Object(r.a)(t,j),N=null===(c=S.scores)||void 0===c?void 0:c.find((function(e){return e.criterion.id.toString()===v.id.toString()})),I=function(e){return g(Object(n.a)(Object(n.a)({},v),{},{children:e}))},w=function(t,c){return Object(s.createElement)(e,Object(n.a)(Object(n.a)({},S),{},{key:t.id,criterion:t,deep:p+1,edit:x,updateCriterion:function(e){return function(e,t){var c=Object(i.a)(v.children);c[e]=t,I(c)}(c,e)},removeCriterion:function(){return function(e){var t=Object(i.a)(v.children);t.splice(e,1),I(t)}(c)}}))};return Object(d.jsxs)(a.J,{className:"".concat(p>0?"ml-4 mt-".concat(4-p):""),children:[Object(d.jsxs)(a.K,{row:!0,className:"pl-0 ml-0 mb-0",children:[Object(d.jsx)(a.u,{className:"pl-0 pr-1",children:x&&p>0?Object(d.jsx)(a.Gb,{rows:parseInt((null===(u=v.description)||void 0===u?void 0:u.length)/130)+1,value:v.description,onChange:function(e){return g(Object(n.a)(Object(n.a)({},v),{},{description:e.target.value}))}}):Object(d.jsx)(d.Fragment,{children:p>0?v.description:null})}),x&&Object(d.jsx)(a.u,{md:"0",children:Object(d.jsxs)(a.z,{children:[Object(d.jsx)(a.Mb,{content:"Gi\u1eef v\xe0 k\xe9o \u0111\u1ec3 thay \u0111\u1ed5i th\u1ee9 t\u1ef1",children:Object(d.jsx)(a.E,{size:"sm",color:"primary",variant:"outline",split:!0,children:Object(d.jsx)(o.a,{name:"cil-cursor-move"})})}),Object(d.jsxs)(a.D,{children:[Object(d.jsx)(a.C,{onClick:function(){var e=Object(n.a)({},v);e.children=[].concat(Object(i.a)(v.children),[{parentId:v.id,children:[]}]),g(e)},children:"Th\xeam ti\xeau ch\xed con"}),p>0&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(a.C,{onClick:function(){g(Object(n.a)(Object(n.a)({},v),{},{mark:!v.mark}))},children:v.mark?"H\u1ee7y ch\u1ea5m \u0111i\u1ec3m":"Ch\u1ea5m \u0111i\u1ec3m ti\xeau ch\xed"}),Object(d.jsx)(a.C,{onClick:k,children:"X\xf3a ti\xeau ch\xed"})]})]})]})})]}),v.children&&v.children.length>0&&(x?Object(d.jsx)(l.ReactSortable,{list:null===v||void 0===v?void 0:v.children,setList:I,children:null===v||void 0===v||null===(b=v.children)||void 0===b?void 0:b.map(w)}):null===v||void 0===v||null===(h=v.children)||void 0===h?void 0:h.map(w)),v.mark&&Object(d.jsxs)(a.K,{row:!0,className:"m-0 ml-2",children:[Object(d.jsx)(a.u,{className:"p-0",style:{maxWidth:60},children:Object(d.jsx)(a.P,{size:"sm",placeholder:"\u0110i\u1ec3m",value:null===N||void 0===N?void 0:N.score,disabled:S.disableMark,onChange:function(e){return S.updateScore(Object(n.a)(Object(n.a)({},N),{},{criterion:{id:v.id},score:e.target.value}))}})}),Object(d.jsx)(a.u,{className:"p-0",children:Object(d.jsx)(a.Gb,{size:"sm",rows:1,placeholder:"B\xecnh lu\u1eadn cho: ".concat(null===(m=v.description)||void 0===m?void 0:m.slice(0,150)),value:null===N||void 0===N?void 0:N.comment,disabled:S.disableMark,onChange:function(e){return S.updateScore(Object(n.a)(Object(n.a)({},N),{},{criterion:{id:v.id},comment:e.target.value}))}})}),x&&Object(d.jsx)(a.u,{md:"0",children:Object(d.jsx)(a.Mb,{content:"B\u1ecf ch\u1ea5m \u0111i\u1ec3m ti\xeau ch\xed",children:Object(d.jsx)(a.f,{size:"sm",color:"primary",variant:"ghost",onClick:function(){g(Object(n.a)(Object(n.a)({},v),{},{mark:!1}))},children:Object(d.jsx)(o.a,{name:"cil-trash"})})})})]})]})}},738:function(e,t,c){"use strict";var i=c(48),n=(c(1),c(26)),r=c(13);t.a=function(e){var t=e.council,c=void 0===t?{}:t,o=Object(n.g)();return Object(r.jsx)(i.Qb,{color:"info",iconPadding:!1,className:"mb-0",header:Object(r.jsx)(i.Mb,{content:"Xem chi ti\u1ebft h\u1ed9i \u0111\u1ed3ng m\xe3 s\u1ed1 ".concat(c.id),children:Object(r.jsxs)(i.ab,{onClick:function(){o.push("/councils/detail/".concat(c.id))},children:["".concat(c.subjectDepartmentName),Object(r.jsx)("br",{}),"".concat(c.reserveDate,": ").concat(c.startTime," - ").concat(c.endTime)]})}),text:c.location&&Object(r.jsx)("small",{children:"".concat(c.location.slice(0,300)+(c.location.length>300?"...":""))}),children:c.id})}},739:function(e,t,c){"use strict";var i=c(48),n=(c(1),c(26)),r=c(13);t.a=function(e){var t,c,o=e.topic,a=Object(n.g)();return Object(r.jsx)(i.Qb,{color:"info",iconPadding:!1,className:"mb-0",header:Object(r.jsx)(i.Mb,{content:"Xem chi ti\u1ebft \u0111\u1ec1 t\xe0i m\xe3 s\u1ed1 ".concat(o.id),children:Object(r.jsxs)(i.ab,{onClick:function(){a.push("/topics/".concat(o.id))},children:["".concat(null===(t=o.name)||void 0===t?void 0:t.vi),Object(r.jsx)("br",{}),"".concat(null===(c=o.name)||void 0===c?void 0:c.en)]})}),text:o.description&&Object(r.jsx)("small",{children:"".concat(o.description.slice(0,300)+(o.description.length>300?"...":""))}),children:o.id})}},740:function(e,t,c){"use strict";var i=c(193),n=c(46),r=c(107),o=c(59),a=c(48),s=c(1),l=c(724),d=c(77),j=c(108),u=c(109),b=c(13);t.a=function(e){var t,c,h=e.settingTemplate,m=e.topicId,O=e.studentId,v=e.teacherId,p=e.disableMark,x=void 0!==p&&p,f={settingTemplate:{id:h.id},topic:{id:m},teacher:{id:null!==v&&void 0!==v?v:j.a.user.id},student:{id:O}},g=Object(s.useState)([]),C=Object(r.a)(g,2),k=C[0],S=C[1];return Object(s.useEffect)((function(){d.a.post("/scores/example",f).then(S)}),[]),Object(b.jsxs)(a.j,{children:[Object(b.jsx)(a.n,{children:null===(t=h.template)||void 0===t?void 0:t.description}),Object(b.jsx)(a.k,{className:"pl-0 mr-3",children:Object(b.jsx)(l.a,{criterion:null===(c=h.template)||void 0===c?void 0:c.rootCriterion,deep:0,scores:k,updateScore:function(e){e=Object(n.a)(Object(n.a)({},e),f);var t=k.findIndex((function(t){return t.criterion.id===e.criterion.id}));if(t<0)S([].concat(Object(i.a)(k),[e]));else{var c=k.slice();c[t]=e,S(c)}},disableMark:x})}),!x&&Object(b.jsx)(a.l,{children:Object(b.jsxs)(a.f,{size:"sm",color:"primary",onClick:function(){d.a.post("/scores/all",{entities:k}).then((function(){u.a.success("Ch\u1ea5m \u0111i\u1ec3m th\xe0nh c\xf4ng")}))},children:[Object(b.jsx)(o.a,{name:"cil-save"})," L\u01b0u"]})})]})}},794:function(e,t,c){"use strict";c.r(t);var i=c(107),n=c(48),r=c(1),o=c(738),a=c(740),s=c(739),l=c(77),d=c(13);t.default=function(){var e,t,c=window.location.pathname.match(/score\/topic\/(\d+)/,"")[1],j=Object(r.useState)({}),u=Object(i.a)(j,2),b=u[0],h=u[1],m=Object(r.useState)(-1),O=Object(i.a)(m,2),v=O[0],p=O[1],x=Object(r.useState)([]),f=Object(i.a)(x,2),g=f[0],C=f[1],k=Object(r.useState)("---"),S=Object(i.a)(k,2),N=S[0],I=S[1],w=Object(r.useState)([]),z=Object(i.a)(w,2),M=z[0],y=z[1],T=Object(r.useState)("---"),G=Object(i.a)(T,2),E=G[0],J=G[1],D=Object(r.useState)("---"),K=Object(i.a)(D,2),P=K[0],X=K[1];return Object(r.useEffect)((function(){l.a.get("/topics/detail/".concat(c)).then((function(e){h(e)}))}),[]),Object(r.useEffect)((function(){var e;I("---"),J("---");var t=-1;if("-1"===v)e="guide",C(b.guideTeachers);else if("-2"===v)e="review",C(b.reviewTeachers);else if(v>0){var i,n;e="council",t=v;var r=null===b||void 0===b||null===(i=b.council)||void 0===i||null===(n=i.members)||void 0===n?void 0:n.filter((function(e){return e.member.id.toString()===v})).map((function(e){return e.member}));C(r)}e&&l.a.get("/setting-templates/topic",{params:{topicId:c,role:e,memberId:t}}).then(y)}),[v]),Object(d.jsxs)(n.j,{children:[Object(d.jsxs)(n.n,{children:[Object(d.jsxs)(n.tb,{class:"d-flex justify-content-center",children:[b.council&&Object(d.jsx)(n.u,{md:"4",children:Object(d.jsx)(o.a,{council:b.council})}),Object(d.jsx)(n.u,{md:"4",children:Object(d.jsx)(s.a,{topic:b})})]}),Object(d.jsx)("br",{}),Object(d.jsx)(n.J,{children:Object(d.jsxs)(n.K,{row:!0,children:[Object(d.jsxs)(n.u,{md:"2",children:["Vai tr\xf2",Object(d.jsxs)(n.ub,{size:"sm",onChange:function(e){return p(e.target.value)},children:[Object(d.jsx)("option",{children:"---"}),Object(d.jsx)("option",{value:"-1",children:"Gi\xe1o vi\xean h\u01b0\u1edbng d\u1eabn"}),Object(d.jsx)("option",{value:"-2",children:"Gi\xe1o vi\xean ph\u1ea3n bi\u1ec7n"}),null===(e=b.council)||void 0===e?void 0:e.members.map((function(e){return e.role})).filter((function(e,t,c){return c.findIndex((function(t){return t.id===e.id}))===t})).map((function(e){return Object(d.jsxs)("option",{id:e.id,value:e.id,children:[e.name," h\u1ed9i \u0111\u1ed3ng"]})}))]})]}),Object(d.jsxs)(n.u,{md:"3",children:["Gi\xe1o vi\xean",Object(d.jsxs)(n.ub,{size:"sm",value:N,onChange:function(e){return I(e.target.value)},children:[Object(d.jsx)("option",{children:"---"}),g.map((function(e){return Object(d.jsxs)("option",{id:e.id,value:e.id,children:[e.code," ",e.firstName," ",e.lastName]})}))]})]}),Object(d.jsxs)(n.u,{children:["M\u1eabu ti\xeau ch\xed",Object(d.jsxs)(n.ub,{size:"sm",onChange:function(e){return J(e.target.value)},children:[Object(d.jsx)("option",{children:"---"}),M.map((function(e,t){return Object(d.jsx)("option",{id:e.id,value:t,children:e.template.name})}))]})]}),Object(d.jsxs)(n.u,{md:"3",children:["Sinh vi\xean",Object(d.jsxs)(n.ub,{size:"sm",onChange:function(e){return X(e.target.value)},children:[Object(d.jsx)("option",{children:"---"}),null===b||void 0===b||null===(t=b.students)||void 0===t?void 0:t.map((function(e){return Object(d.jsxs)("option",{id:e.id,value:e.id,children:[e.code," ",e.firstName," ",e.lastName]})}))]})]})]})})]}),Object(d.jsx)(n.k,{children:"---"!==E&&"---"!==N&&"---"!==P&&Object(d.jsx)(a.a,{settingTemplate:M[E],topicId:c,teacherId:N,studentId:P,disableMark:!0})})]})}}}]);
//# sourceMappingURL=9.e0f404dc.chunk.js.map