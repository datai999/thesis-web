{"version":3,"sources":["pages/teacher/TeacherSearchModal.js","components/SubjectDepartmentTab.js","pages/assign/review/AssignReviewTable.js","pages/assign/review/AssignReview.js"],"names":["fields","key","label","_style","width","Component","view","disableView","selected","useState","page","setPage","data","setData","useEffect","api","get","params","direction","then","color","size","show","onClose","closeButton","items","sorter","hover","striped","columnFilter","itemsPerPage","activePage","clickableRows","onRowClick","onActivePageChange","newPage","align","onClick","tabs","contextHolder","subjectDepartments","map","e","id","tabName","name","MainComponent","URL","InnerComponent","history","useHistory","location","useLocation","headSubjectDepartment","user","permissions","includes","PERMISSIONS","HEAD_SUBJECT_DEPARTMENT","subjectDepartmentId","subjectDepartment","pathname","split","pop","initTabIndex","findIndex","toString","tabIndex","setTabIndex","push","activeTab","onActiveTabChange","variant","tab","index","filter","multiLine","array","queryPage","search","match","currentPage","Number","details","setDetails","searchTeachers","setSearchTeachers","currentTopicIndex","setCurrentTopicIndex","canAssign","loginUserHasAny","ADMIN","toggleDetails","position","indexOf","newDetails","slice","splice","getData","a","post","response","forEach","guideTeacherRenders","guideTeachers","code","firstName","lastName","email","reviewTeacherRenders","reviewTeachers","TeacherSearchModal","teacher","nextData","_","cloneDeep","addReviewTeacher","tableFilter","itemsPerPageSelect","scopedSlots","names","item","educationMethodNames","majorNames","content","className","nextReviewTeachers","removeReviewTeacher","actions","vertical","topic","put","md","description","task","documentReference","students","SubjectDepartmentTab","AssignReviewTable"],"mappings":"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","file":"static/js/10.40fb6e74.chunk.js","sourcesContent":["import {\r\n  CButton,\r\n  CDataTable,\r\n  CModal,\r\n  CModalBody,\r\n  CModalFooter,\r\n  CModalHeader,\r\n  CModalTitle,\r\n  CPagination\r\n} from \"@coreui/react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport api from \"src/service/api\";\r\n\r\nconst fields = [\r\n  { key: \"code\", label: \"Mã số\", _style: { width: \"10%\" } },\r\n  { key: \"firstName\", label: \"Họ\" },\r\n  { key: \"lastName\", label: \"Tên\", _style: { width: \"10%\" } },\r\n  { key: \"subjectDepartmentName\", label: \"Bộ môn\" },\r\n  { key: \"degreeName\", label: \"Học vị\" },\r\n  { key: \"email\", label: \"Email:@hcmut.edu.vn\" },\r\n];\r\n\r\nconst Component = ({ view, disableView, selected }) => {\r\n  const [page, setPage] = useState(1);\r\n  const [data, setData] = useState([]);\r\n  const size = 5;\r\n\r\n  const pageChange = (newPage) => {\r\n    if (page !== newPage) {\r\n      setPage(newPage);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    api\r\n      .get(\"/users/type-teacher\", { params: { direction: \"DESC\" } })\r\n      .then(setData);\r\n  }, [page]);\r\n\r\n  return (\r\n    <CModal color=\"info\" size=\"lg\" show={view} onClose={disableView}>\r\n      <CModalHeader closeButton>\r\n        <CModalTitle>Tìm kiếm giáo viên</CModalTitle>\r\n      </CModalHeader>\r\n      <CModalBody>\r\n        <CDataTable\r\n          items={data}\r\n          fields={fields}\r\n          sorter\r\n          hover\r\n          striped\r\n          columnFilter\r\n          itemsPerPage={size}\r\n          activePage={page}\r\n          clickableRows\r\n          onRowClick={selected}\r\n        />\r\n        <CPagination\r\n          activePage={page}\r\n          onActivePageChange={pageChange}\r\n          align=\"center\"\r\n        />\r\n      </CModalBody>\r\n      <CModalFooter>\r\n        <CButton color=\"secondary\" onClick={disableView}>\r\n          Quay về\r\n        </CButton>\r\n      </CModalFooter>\r\n    </CModal>\r\n  );\r\n};\r\n\r\nexport default Component;\r\n","import {\r\n  CCard,\r\n  CCardBody,\r\n  CNav,\r\n  CNavItem,\r\n  CNavLink,\r\n  CTabContent,\r\n  CTabPane,\r\n  CTabs,\r\n} from \"@coreui/react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport contextHolder from \"src/service/contextService\";\r\nimport { PERMISSIONS } from \"./../service/permissionService\";\r\n\r\nconst tabs = contextHolder.subjectDepartments.map((e) => {\r\n  return {\r\n    id: e.id,\r\n    tabName: e.name,\r\n  };\r\n});\r\n\r\nconst MainComponent = ({ URL, InnerComponent }) => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const headSubjectDepartment = contextHolder.user.permissions.includes(\r\n    PERMISSIONS.HEAD_SUBJECT_DEPARTMENT\r\n  );\r\n\r\n  const subjectDepartmentId = !headSubjectDepartment\r\n    ? location.pathname.split(\"/\").pop()\r\n    : contextHolder.user.subjectDepartment?.id;\r\n  const initTabIndex = tabs.findIndex(\r\n    (e) => e.id.toString() === subjectDepartmentId?.toString()\r\n  );\r\n\r\n  const [tabIndex, setTabIndex] = useState(initTabIndex < 0 ? 0 : initTabIndex);\r\n\r\n  useEffect(() => {\r\n    if (headSubjectDepartment) {\r\n      history.push(`${URL}/${contextHolder.user.subjectDepartment.id}`);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    history.push(`${URL}/${tabs[tabIndex].id}`);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [tabIndex]);\r\n\r\n  return (\r\n    <CCard>\r\n      <CCardBody>\r\n        <CTabs activeTab={tabIndex} onActiveTabChange={setTabIndex}>\r\n          <CNav variant=\"tabs\">\r\n            {tabs.map((e) => (\r\n              <CNavItem key={e.id}>\r\n                <CNavLink>{e.tabName}</CNavLink>\r\n              </CNavItem>\r\n            ))}\r\n          </CNav>\r\n          <CTabContent>\r\n            {tabs.map((tab, index) => (\r\n              <CTabPane>\r\n                {index === tabIndex && (\r\n                  <InnerComponent subjectDepartmentId={tab.id} />\r\n                )}\r\n              </CTabPane>\r\n            ))}\r\n          </CTabContent>\r\n        </CTabs>\r\n      </CCardBody>\r\n    </CCard>\r\n  );\r\n};\r\n\r\nexport default MainComponent;\r\n","import CIcon from \"@coreui/icons-react\";\r\nimport {\r\n  CButton,\r\n  CButtonGroup,\r\n  CCardBody,\r\n  CCol,\r\n  CCollapse,\r\n  CDataTable,\r\n  CListGroupItem,\r\n  CPagination,\r\n  CRow,\r\n  CTooltip,\r\n} from \"@coreui/react\";\r\nimport _ from \"lodash\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport TeacherSearchModal from \"src/pages/teacher/TeacherSearchModal\";\r\nimport api from \"src/service/api\";\r\nimport contextHolder from \"src/service/contextService\";\r\nimport { loginUserHasAny, PERMISSIONS } from \"src/service/permissionService\";\r\n\r\nconst fields = [\r\n  { key: \"id\", label: \"Mã\", _style: { width: \"1%\" } },\r\n  { key: \"names\", label: \"Tên đề tài\", _style: { width: \"30%\" } },\r\n  { key: \"semester\", label: \"Học kỳ\", _style: { width: \"1%\" } },\r\n  {\r\n    key: \"educationMethodNames\",\r\n    label: \"Phương thức\",\r\n    _style: { width: \"12%\" },\r\n  },\r\n  { key: \"majorNames\", label: \"Ngành\", _style: { width: \"10%\" } },\r\n  {\r\n    key: \"guideTeacherRenders\",\r\n    label: \"Giáo viên hướng dẫn\",\r\n    _style: { width: \"20%\" },\r\n  },\r\n  {\r\n    key: \"reviewTeacherRenders\",\r\n    label: \"Giáo viên phản biện\",\r\n    _style: { width: \"20%\" },\r\n  },\r\n  {\r\n    key: \"actions\",\r\n    label: \"\",\r\n    _style: { width: 1 },\r\n    sorter: false,\r\n    filter: false,\r\n  },\r\n];\r\n\r\nconst MainComponent = ({ subjectDepartmentId }) => {\r\n  const history = useHistory();\r\n  const queryPage = useLocation().search.match(/page=([0-9]+)/, \"\");\r\n  const currentPage = Number(queryPage && queryPage[1] ? queryPage[1] : 1);\r\n  const [page, setPage] = useState(currentPage);\r\n  const [data, setData] = useState([]);\r\n  const [details, setDetails] = useState([]);\r\n  const [searchTeachers, setSearchTeachers] = useState(false);\r\n  const [currentTopicIndex, setCurrentTopicIndex] = useState(-1);\r\n  const size = 5;\r\n\r\n  const canAssign =\r\n    (loginUserHasAny([PERMISSIONS.HEAD_SUBJECT_DEPARTMENT]) &&\r\n      contextHolder.user.subjectDepartment?.id === subjectDepartmentId) ||\r\n    loginUserHasAny([PERMISSIONS.ADMIN]);\r\n\r\n  const pageChange = (newPage) => {\r\n    currentPage !== newPage &&\r\n      history.push(`/assign/review/${subjectDepartmentId}?page=${newPage}`);\r\n    setPage(newPage);\r\n  };\r\n\r\n  const toggleDetails = (index) => {\r\n    const position = details.indexOf(index);\r\n    let newDetails = details.slice();\r\n    if (position !== -1) {\r\n      newDetails.splice(position, 1);\r\n    } else {\r\n      newDetails = [...details, index];\r\n    }\r\n    setDetails(newDetails);\r\n  };\r\n\r\n  const getData = async () => {\r\n    api\r\n      .post(\r\n        `/topics/example`,\r\n        {\r\n          subjectDepartment: subjectDepartmentId,\r\n        },\r\n        {\r\n          params: {\r\n            direction: \"DESC\",\r\n          },\r\n        }\r\n      )\r\n      .then((response) => {\r\n        response.forEach((e) => {\r\n          e.guideTeacherRenders = e.guideTeachers.map((user) =>\r\n            `${user.code} ${user.firstName} ${user.lastName} ${user.email}`.toString()\r\n          );\r\n          e.reviewTeacherRenders = e.reviewTeachers.map((user) =>\r\n            `${user.code} ${user.firstName} ${user.lastName} ${user.email}`.toString()\r\n          );\r\n        });\r\n        setData(response);\r\n      });\r\n  };\r\n\r\n  const addReviewTeacher = (teacher) => {\r\n    const nextData = _.cloneDeep(data);\r\n    nextData[currentTopicIndex].reviewTeachers = [\r\n      ...data[currentTopicIndex].reviewTeachers,\r\n      teacher,\r\n    ];\r\n    setData(nextData);\r\n  };\r\n\r\n  const removeReviewTeacher = (teacher) => {\r\n    const nextReviewTeachers = data[currentTopicIndex].reviewTeachers.filter(\r\n      (e) => e.id !== teacher.id\r\n    );\r\n    const nextData = _.cloneDeep(data);\r\n    nextData[currentTopicIndex].reviewTeachers = nextReviewTeachers;\r\n    setData(nextData);\r\n  };\r\n\r\n  const updateTopic = (topic) => {\r\n    api.put(`/topics/${topic.id}/assign-reviews`, topic).then(() => {\r\n      getData();\r\n      setCurrentTopicIndex(-1);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page]);\r\n\r\n  return (\r\n    <>\r\n      <TeacherSearchModal\r\n        view={searchTeachers}\r\n        disableView={() => setSearchTeachers(false)}\r\n        selected={(teacher) => {\r\n          setSearchTeachers(false);\r\n          addReviewTeacher(teacher);\r\n        }}\r\n      />\r\n      <CDataTable\r\n        items={data}\r\n        fields={fields}\r\n        hover\r\n        sorter\r\n        columnFilter\r\n        tableFilter\r\n        itemsPerPageSelect\r\n        itemsPerPage={size}\r\n        activePage={page}\r\n        scopedSlots={{\r\n          names: (item) => multiLine(item.names),\r\n          educationMethodNames: (item) => multiLine(item.educationMethodNames),\r\n          majorNames: (item) => multiLine(item.majorNames),\r\n          guideTeacherRenders: (item) =>\r\n            multiLine(\r\n              item.guideTeachers.map((user) => (\r\n                <div>\r\n                  {user.code} {user.firstName} {user.lastName}{\" \"}\r\n                  <CTooltip content={user.email}>\r\n                    <CIcon name=\"cil-envelope-closed\" className=\"mb-2\" />\r\n                  </CTooltip>\r\n                </div>\r\n              ))\r\n            ),\r\n          reviewTeacherRenders: (item, index) => (\r\n            <td>\r\n              {item.reviewTeachers.map((user) => (\r\n                <div>\r\n                  {user.code} {user.firstName} {user.lastName}{\" \"}\r\n                  <CTooltip content={user.email}>\r\n                    <CIcon name=\"cil-envelope-closed\" className=\"mb-2\" />\r\n                  </CTooltip>\r\n                  {currentTopicIndex === index && (\r\n                    <CTooltip content={\"Xóa giáo viên\"}>\r\n                      <CButton\r\n                        color=\"primary\"\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        className=\"mb-2\"\r\n                        onClick={() => {\r\n                          removeReviewTeacher(user);\r\n                        }}\r\n                      >\r\n                        <CIcon\r\n                          name=\"cil-user-unfollow\"\r\n                          className=\"text-danger\"\r\n                        />\r\n                      </CButton>\r\n                    </CTooltip>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </td>\r\n          ),\r\n          actions: (item, index) => (\r\n            <td className=\"py-2\">\r\n              {currentTopicIndex === index ? (\r\n                <CButtonGroup vertical size=\"sm\">\r\n                  <CTooltip content={\"Thêm giáo viên phản biện\"}>\r\n                    <CButton\r\n                      color=\"primary\"\r\n                      variant=\"outline\"\r\n                      onClick={() => {\r\n                        setSearchTeachers(true);\r\n                      }}\r\n                    >\r\n                      <CIcon name=\"cil-user-follow\" className=\"text-success\" />\r\n                    </CButton>\r\n                  </CTooltip>\r\n                  <CTooltip content={\"Lưu\"}>\r\n                    <CButton\r\n                      color=\"primary\"\r\n                      variant=\"outline\"\r\n                      onClick={() => {\r\n                        updateTopic(item);\r\n                      }}\r\n                    >\r\n                      <CIcon name=\"cil-save\" />\r\n                    </CButton>\r\n                  </CTooltip>\r\n                </CButtonGroup>\r\n              ) : (\r\n                <CButtonGroup vertical size=\"sm\">\r\n                  {canAssign && (\r\n                    <CTooltip content={\"Chỉnh sửa\"}>\r\n                      <CButton\r\n                        color=\"primary\"\r\n                        variant=\"outline\"\r\n                        onClick={() => {\r\n                          if (!details.includes(item.id))\r\n                            toggleDetails(item.id);\r\n                          setCurrentTopicIndex(index);\r\n                        }}\r\n                      >\r\n                        <CIcon name=\"cil-pencil\" />\r\n                      </CButton>\r\n                    </CTooltip>\r\n                  )}\r\n                  <CTooltip\r\n                    content={details.includes(item.id) ? \"Ẩn bớt\" : \"Chi tiết\"}\r\n                  >\r\n                    <CButton\r\n                      color=\"primary\"\r\n                      variant=\"outline\"\r\n                      onClick={() => {\r\n                        toggleDetails(item.id);\r\n                      }}\r\n                    >\r\n                      <CIcon\r\n                        name={`cil-chevron-${\r\n                          details.includes(item.id) ? \"top\" : \"bottom\"\r\n                        }`}\r\n                      />\r\n                    </CButton>\r\n                  </CTooltip>\r\n                </CButtonGroup>\r\n              )}\r\n            </td>\r\n          ),\r\n          details: (item) => (\r\n            <CCollapse show={details.includes(item.id)}>\r\n              <CCardBody>\r\n                <CRow>\r\n                  <CCol md=\"4\">\r\n                    Mô tả\r\n                    <br />\r\n                    {item.description}\r\n                  </CCol>\r\n                  <CCol md=\"5\">\r\n                    Nhiệm vụ\r\n                    <br />\r\n                    {item.task}\r\n                    <br />\r\n                    Tài liệu\r\n                    <br />\r\n                    {item.documentReference}\r\n                  </CCol>\r\n                  <CCol>\r\n                    Sinh viên thực hiện\r\n                    <br />\r\n                    {item.students.map((user) => (\r\n                      <CListGroupItem key={user}>\r\n                        <CRow>\r\n                          <CCol>{user.code}</CCol>\r\n                        </CRow>\r\n                        <CRow>\r\n                          <CCol>\r\n                            {user.firstName} {user.lastName}\r\n                          </CCol>\r\n                        </CRow>\r\n                        <CRow>\r\n                          <CCol>{user.email}</CCol>\r\n                        </CRow>\r\n                      </CListGroupItem>\r\n                    ))}\r\n                  </CCol>\r\n                </CRow>\r\n              </CCardBody>\r\n            </CCollapse>\r\n          ),\r\n        }}\r\n      />\r\n      <CPagination\r\n        size=\"sm\"\r\n        activePage={page}\r\n        onActivePageChange={pageChange}\r\n        align=\"center\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nconst multiLine = (array = []) => (\r\n  <td>{array && array.map((e) => <div>{e}</div>)}</td>\r\n);\r\n\r\nexport default MainComponent;\r\n","import React from \"react\";\r\nimport SubjectDepartmentTab from \"src/components/SubjectDepartmentTab\";\r\nimport AssignReviewTable from \"./AssignReviewTable\";\r\n\r\nconst MainComponent = () => (\r\n  <SubjectDepartmentTab\r\n    URL=\"/assign/review\"\r\n    InnerComponent={AssignReviewTable}\r\n  />\r\n);\r\n\r\nexport default MainComponent;\r\n"],"sourceRoot":""}