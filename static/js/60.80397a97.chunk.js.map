{"version":3,"sources":["service/firebase.js","views/pages/login/Login.js"],"names":["initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getAuth","GoogleAuthProvider","Login","history","useHistory","tryAsAdmin","a","window","localStorage","setItem","push","className","md","color","onClick"],"mappings":"kQAcAA,YAVuB,CACrBC,OAAQ,0CACRC,WAAY,+BACZC,UAAW,eACXC,cAAe,2BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAKJC,cACI,IAAIC,IADrB,I,QCiDeC,UA3DD,WACZ,IAAMC,EAAUC,cAeVC,EAAU,uCAAG,sBAAAC,EAAA,sDACjBC,OAAOC,aAAaC,QAAQ,QAAS,qCACrCF,OAAOC,aAAaC,QAAQ,SAAU,GACtCN,EAAQO,KAAR,cAHiB,2CAAH,qDAMhB,OACE,qBAAKC,UAAU,qDAAf,SACE,cAAC,IAAD,UACE,cAAC,KAAD,CAAMA,UAAU,yBAAhB,SACE,cAAC,IAAD,CAAMC,GAAG,IAAT,SACE,cAAC,IAAD,CAAOD,UAAU,MAAjB,SACE,eAAC,IAAD,WACE,2FASA,eAAC,KAAD,CAAMA,UAAU,OAAhB,UACE,cAAC,IAAD,CAAMC,GAAG,IAAT,+EACA,cAAC,IAAD,UACE,cAAC,IAAD,CACEC,MAAM,UACNF,UAAU,OACVG,QAAST,EAHX","file":"static/js/60.80397a97.chunk.js","sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { getAuth, GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\r\n\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyC8147ZvfFX6fIuxYzAZaxmjQxJJoYQQZo\",\r\n  authDomain: \"thesis-89bfb.firebaseapp.com\",\r\n  projectId: \"thesis-89bfb\",\r\n  storageBucket: \"thesis-89bfb.appspot.com\",\r\n  messagingSenderId: \"889075031837\",\r\n  appId: \"1:889075031837:web:f754a809a3f260cd254bf4\",\r\n  measurementId: \"G-TKZRC7GR4L\",\r\n};\r\n\r\ninitializeApp(firebaseConfig);\r\n\r\nconst auth = getAuth();\r\nconst provider = new GoogleAuthProvider();\r\n\r\nexport const signInWithGoogle = () => {\r\n  return signInWithPopup(auth, provider);\r\n};\r\n\r\nexport const getIdToken = async () => {\r\n  return await auth.currentUser.getIdToken(true);\r\n};\r\n","import { CButton, CCard, CCol, CContainer, CForm, CRow } from \"@coreui/react\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport api from \"../../../service/api\";\r\nimport { getIdToken, signInWithGoogle } from \"../../../service/firebase\";\r\n\r\nconst Login = () => {\r\n  const history = useHistory();\r\n\r\n  const login = async () => {\r\n    const result = await signInWithGoogle();\r\n    // TODO check extend email domain\r\n    console.log(result.user.email);\r\n    const token = await getIdToken();\r\n    console.log(token);\r\n    window.localStorage.setItem(\"token\", token);\r\n    const loginResponse = await api.post(\"/users/login\");\r\n    console.log(loginResponse);\r\n    window.localStorage.setItem(\"userId\", loginResponse.id);\r\n    history.push(`/my/topics`);\r\n  };\r\n\r\n  const tryAsAdmin = async () => {\r\n    window.localStorage.setItem(\"token\", \"tai.nguyen.cse.datai@hcmut.edu.vn\");\r\n    window.localStorage.setItem(\"userId\", 1);\r\n    history.push(`/dashboard`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"c-app c-default-layout flex-row align-items-center\">\r\n      <CContainer>\r\n        <CRow className=\"justify-content-center\">\r\n          <CCol md=\"4\">\r\n            <CCard className=\"p-4\">\r\n              <CForm>\r\n                <h2>Hệ thống đánh giá luận văn</h2>\r\n                {/* <CRow className=\"pt-4\">\r\n                  <CCol md=\"7\">Sử dụng mail@hcmut.edu.vn</CCol>\r\n                  <CCol>\r\n                    <CButton color=\"primary\" className=\"px-4\" onClick={login}>\r\n                      Đăng nhập\r\n                    </CButton>\r\n                  </CCol>\r\n                </CRow> */}\r\n                <CRow className=\"pt-4\">\r\n                  <CCol md=\"7\">Thử nghiệm hệ thống với vai trò admin</CCol>\r\n                  <CCol>\r\n                    <CButton\r\n                      color=\"primary\"\r\n                      className=\"px-4\"\r\n                      onClick={tryAsAdmin}\r\n                    >\r\n                      Đăng nhập\r\n                    </CButton>\r\n                  </CCol>\r\n                </CRow>\r\n              </CForm>\r\n            </CCard>\r\n          </CCol>\r\n        </CRow>\r\n      </CContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}