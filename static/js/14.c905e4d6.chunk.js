(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[14,22],{720:function(e,t,c){"use strict";var n=c(107),i=c(48),a=c(1),s=c(77),r=c(13),o=[{key:"code",label:"M\xe3 s\u1ed1",_style:{width:"10%"}},{key:"firstName",label:"H\u1ecd"},{key:"lastName",label:"T\xean",_style:{width:"10%"}},{key:"subjectDepartmentName",label:"B\u1ed9 m\xf4n"},{key:"degreeName",label:"H\u1ecdc v\u1ecb"},{key:"email",label:"Email:@hcmut.edu.vn"}];t.a=function(e){var t=e.view,c=e.disableView,l=e.selected,j=Object(a.useState)(1),b=Object(n.a)(j,2),h=b[0],u=b[1],d=Object(a.useState)([]),m=Object(n.a)(d,2),O=m[0],f=m[1];return Object(a.useEffect)((function(){s.a.get("/users/type-teacher",{params:{direction:"DESC"}}).then(f)}),[h]),Object(r.jsxs)(i.db,{color:"info",size:"lg",show:t,onClose:c,children:[Object(r.jsx)(i.gb,{closeButton:!0,children:Object(r.jsx)(i.hb,{children:"T\xecm ki\u1ebfm gi\xe1o vi\xean"})}),Object(r.jsxs)(i.eb,{children:[Object(r.jsx)(i.y,{items:O,fields:o,sorter:!0,hover:!0,striped:!0,columnFilter:!0,itemsPerPage:5,activePage:h,clickableRows:!0,onRowClick:l}),Object(r.jsx)(i.pb,{activePage:h,onActivePageChange:function(e){h!==e&&u(e)},align:"center"})]}),Object(r.jsx)(i.fb,{children:Object(r.jsx)(i.f,{color:"secondary",onClick:c,children:"Quay v\u1ec1"})})]})}},743:function(e,t,c){"use strict";c.r(t);var n=c(46),i=c(193),a=c(107),s=c(59),r=c(48),o=c(718),l=c.n(o),j=c(1),b=c(26),h=c(720),u=c(77),d=c(108),m=c(109),O=c(13),f=function(e){var t=e.user,c=e.remove;return Object(O.jsx)(r.Qb,{color:"info",iconPadding:!1,className:"mb-2 mx-0 px-0",header:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("tr",{class:"d-flex justify-content-between",children:[Object(O.jsx)("td",{children:"".concat(t.degreeName," m\xe3 s\u1ed1 ").concat(t.code)}),Object(O.jsx)("td",{children:Object(O.jsx)(r.Mb,{content:"X\xf3a gi\xe1o vi\xean",children:Object(O.jsx)(r.ab,{className:"card-header-action",style:{right:5,position:"absolute"},onClick:c,children:Object(O.jsx)(s.a,{name:"cil-x-circle"})})})})]}),"".concat(t.firstName," ").concat(t.lastName)]}),text:Object(O.jsx)("small",{children:"".concat(t.email)}),children:Object(O.jsx)(s.a,{width:24,name:"cil-user"})})};t.default=function(e){var t=e.location,c=Object(b.h)().pathname.match(/(?:\/councils\/)(\d+)/,"")[1],o=Object(b.g)(),x=Object(j.useState)({}),p=Object(a.a)(x,2),g=p[0],v=p[1],y=Object(j.useState)([]),k=Object(a.a)(y,2),N=k[0],w=k[1],C=Object(j.useState)(!1),P=Object(a.a)(C,2),T=P[0],S=P[1],E=Object(j.useState)(-1),R=Object(a.a)(E,2),D=R[0],Z=R[1],F=function(e,t){return{value:l.a.get(g,e),onChange:function(c){return function(e,t){var c=l.a.cloneDeep(g);l.a.set(c,e,t),v(c)}(null!==e&&void 0!==e?e:t,c.target.value)}}};return Object(j.useEffect)((function(){(null===t||void 0===t?void 0:t.state)&&v(t.state),u.a.get("/council-roles",{params:{sort:"displayOrder"}}).then((function(e){e.forEach((function(e){var c;(e.teachers=[],null===t||void 0===t?void 0:t.state)&&(null===(c=t.state.members)||void 0===c||c.forEach((function(t){t.role.id===e.id&&(e.teachers=[].concat(Object(i.a)(e.teachers),[t.member]))})))})),w(e)}))}),[]),Object(O.jsxs)(r.j,{children:[Object(O.jsx)(h.a,{view:T,setView:function(){return S(!1)},selected:function(e){S(!1);var t=!1;if(N.forEach((function(e){return e.teachers.forEach((function(e){e.id==e.id&&(t=!0)}))})),t)m.a.error("Gi\xe1o vi\xean ".concat(e.firstName," ").concat(e.lastName," \u0111\xe3 l\xe0 th\xe0nh vi\xean c\u1ee7a h\u1ed9i \u0111\u1ed3ng"));else{var c=l.a.cloneDeep(N),n=[].concat(Object(i.a)(N[D].teachers),[e]);c[D].teachers=n,w(c)}}}),Object(O.jsx)(r.n,{children:Object(O.jsxs)("h5",{className:"card-title mb-0",children:[g.id?"Ch\u1ec9nh s\u1eeda":"T\u1ea1o"," "," h\u1ed9i \u0111\u1ed3ng "," ",g.id]})}),Object(O.jsx)(r.k,{children:Object(O.jsx)(r.J,{children:Object(O.jsxs)(r.tb,{children:[Object(O.jsx)(r.u,{className:"mb-4",children:Object(O.jsx)(r.tb,{children:N.map((function(e,t){return Object(O.jsx)(r.u,{md:e.max>1?12:6,className:"border py-2",children:Object(O.jsxs)(r.K,{className:"mb-0",children:[Object(O.jsx)(r.Z,{children:e.name}),Object(O.jsx)("br",{}),Object(O.jsxs)(r.tb,{children:[e.teachers.map((function(c){return Object(O.jsx)(r.u,{md:e.max>1?6:12,children:Object(O.jsx)(f,{user:c,remove:function(){return function(e,t){var c=l.a.cloneDeep(N),n=N[e].teachers.filter((function(e){return e.id!==t}));c[e].teachers=n,w(c)}(t,c.id)}})},c)})),l.a.range(e.teachers.length,e.max).map((function(e){return Object(O.jsx)(r.u,{children:Object(O.jsx)(r.f,{size:"sm",type:"button",color:"primary",onClick:function(){Z(t),S(!0)},children:"Th\xeam gi\xe1o vi\xean"},e)},e)}))]})]})},e.id)}))})}),Object(O.jsxs)(r.u,{children:[Object(O.jsxs)(r.K,{children:[Object(O.jsx)(r.Z,{children:"\u0110\u1ecba \u0111i\u1ec3m"}),Object(O.jsx)(r.P,Object(n.a)({placeholder:"C\u01a1 s\u1edf, t\xf2a nh\xe0, ph\xf2ng ho\u1eb7c link meet..."},F("location")))]}),Object(O.jsxs)(r.K,{row:!0,children:[Object(O.jsxs)(r.u,{children:[Object(O.jsx)(r.Z,{children:"Ng\xe0y"}),Object(O.jsx)(r.P,Object(n.a)({type:"date"},F("reserveDate")))]}),Object(O.jsxs)(r.u,{children:[Object(O.jsx)(r.Z,{children:"Th\u1eddi gian b\u1eaft \u0111\u1ea7u"}),Object(O.jsx)(r.P,Object(n.a)({type:"time"},F("startTime")))]}),Object(O.jsxs)(r.u,{children:[Object(O.jsx)(r.Z,{children:"Th\u1eddi gian k\u1ebft th\xfac"}),Object(O.jsx)(r.P,Object(n.a)({type:"time"},F("endTime")))]})]}),Object(O.jsxs)(r.K,{children:[Object(O.jsx)(r.Z,{children:"Ghi ch\xfa"}),Object(O.jsx)(r.Gb,Object(n.a)({rows:"7",placeholder:"Ghi ch\xfa..."},F("note")))]})]})]})})}),Object(O.jsx)(r.l,{children:Object(O.jsxs)(r.f,{type:"submit",color:"primary",onClick:function(){g.semester=d.a.semester,g.subjectDepartment=d.a.subjectDepartments.find((function(e){return e.id.toString()===c})),g.members=N.map((function(e){return e.teachers.map((function(t){return{role:e,member:t}}))})).flat(),g.id?u.a.patch("/councils",g).then((function(){m.a.success("C\u1eadp nh\u1eadt h\u1ed9i \u0111\u1ed3ng th\xe0nh c\xf4ng"),o.push("/councils/".concat(c))})):u.a.post("/councils",g).then((function(){m.a.success("T\u1ea1o h\u1ed9i \u0111\u1ed3ng th\xe0nh c\xf4ng"),o.push("/councils/".concat(c))}))},children:[Object(O.jsx)(s.a,{name:"cil-save"})," L\u01b0u"]})})]})}},805:function(e,t,c){"use strict";c.r(t);var n=c(193),i=c(107),a=c(59),s=c(48),r=c(1),o=c(77),l=c(109),j=c(13),b=[{key:"id",label:"M\xe3",_style:{width:"1%"}},{key:"names",label:"T\xean \u0111\u1ec1 t\xe0i"},{key:"educationMethodNames",label:"Ph\u01b0\u01a1ng th\u1ee9c"},{key:"majorNames",label:"Ng\xe0nh"},{key:"guideTeacherRenders",label:"Gi\xe1o vi\xean h\u01b0\u1edbng d\u1eabn"}],h=function(e){var t=e.onRowClick,c=e.topics,n=void 0===c?[]:c,o=Object(r.useState)(1),l=Object(i.a)(o,2),h=l[0],u=l[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(s.y,{items:n,fields:b,activePage:h,itemsPerPage:20,size:"sm",striped:!0,columnFilter:!0,sorter:!0,hover:!0,clickableRows:!0,onRowClick:t,scopedSlots:{guideTeacherRenders:function(e){return Object(j.jsx)("td",{children:e.guideTeachers.map((function(e){return Object(j.jsxs)("div",{children:[e.code," ",e.firstName," ",e.lastName," ",Object(j.jsx)(s.Mb,{content:e.email,children:Object(j.jsx)(a.a,{name:"cil-envelope-closed",className:"mb-2"})})]})}))})}}}),Object(j.jsx)(s.pb,{size:"sm",align:"center",activePage:h,onActivePageChange:u})]})},u=c(743);t.default=function(e){var t=e.location,c=t.pathname.match(/(?:\/councils\/)(\d+)(?:\/edit\/)(\d+)/,""),b=c[1],d=c[2],m=Object(r.useState)([]),O=Object(i.a)(m,2),f=O[0],x=O[1],p=Object(r.useState)([]),g=Object(i.a)(p,2),v=g[0],y=g[1],k=Object(r.useState)(!1),N=Object(i.a)(k,2),w=N[0],C=N[1];return Object(r.useEffect)((function(){o.a.get("/councils/detail/".concat(d)).then((function(e){return x(e.topics)})),o.a.get("/topics/need-council",{params:{subjectDepartmentId:b}}).then((function(e){e.forEach((function(e){e.guideTeacherRenders=e.guideTeachers.map((function(e){return"".concat(e.code," ").concat(e.firstName," ").concat(e.lastName," ").concat(e.email).toString()}))})),y(e)}))}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(u.default,{location:t}),Object(j.jsxs)(s.j,{children:[Object(j.jsx)(s.k,{children:Object(j.jsxs)(s.tb,{children:[Object(j.jsxs)(s.u,{children:[Object(j.jsx)("h5",{className:"card-title mb-0",children:"\u0110\u1ec1 t\xe0i thu\u1ed9c h\u1ed9i \u0111\u1ed3ng"}),Object(j.jsx)(h,{onRowClick:function(e){x(f.filter((function(t){return t.id!==e.id}))),y([].concat(Object(n.a)(v),[e]))},topics:f})]}),Object(j.jsxs)(s.u,{children:[Object(j.jsx)("h5",{className:"card-title mb-0",children:"\u0110\u1ec1 t\xe0i c\u1ea7n g\xe1n h\u1ed9i \u0111\u1ed3ng"}),Object(j.jsx)(h,{onRowClick:function(e){y(v.filter((function(t){return t.id!==e.id}))),x([].concat(Object(n.a)(f),[e]))},topics:v})]})]})}),Object(j.jsx)(s.l,{children:Object(j.jsxs)(s.f,{color:"primary",onClick:function(){o.a.patch("/councils/".concat(d,"/assign-topics?topicIds=").concat(f.map((function(e){return e.id})))).then((function(){l.a.success("Ph\xe2n c\xf4ng h\u1ed9i \u0111\u1ed3ng th\xe0nh c\xf4ng"),C(!w)}))},children:[Object(j.jsx)(a.a,{name:"cil-save"})," L\u01b0u"]})})]})]})}}}]);
//# sourceMappingURL=14.c905e4d6.chunk.js.map